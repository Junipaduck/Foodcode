<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.foodcode.mapper.CustomerMapper">
	<insert id="insertCustomer">
<!-- 		<selectKey keyProperty="board_num" resultType="int" order="BEFORE"> -->
<!-- 			SELECT IFNULL(MAX(c_idx), 0) FROM customer -->
<!-- 		</selectKey> -->
		INSERT 
		INTO customer
		VALUES(
		7
		,#{c_passwd}
		,#{c_name}
		,#{c_email}
		,#{c_phone}
		,#{c_birth}
		,now()
		,#{c_gender}
		,#{c_id}
		)
	
	</insert>
	
	
	
	<select id="isSuccessCustomer" parameterType="String" resultType="boolean">
	
	<!-- 찬영씨가 적은 코드 -->
<!-- 	SELECT IF(COUNT(*) = 1, 1, 0) -->
<!-- 		FROM customer -->
<!-- 			WHERE c_id = #{c_id} AND c_passwd = #{c_passwd} -->
	
	
	<!-- 고객,점주 로그인 할 수 있게 4/9 배하나가 임시로 수정 -->
	select IF(COUNT(*) = 1, 1, 0)
		from (
				(
				select
					c_id as id,
					c_passwd as pw
				from
					customer
				where
					c_id = #{c_id}
					and c_passwd = #{c_passwd})
				union all
				(
				select
					owner_id as id,
					owner_passwd as pw
				from
					owner
				where
					owner_id = #{c_id}
				and owner_passwd = #{c_passwd})) A		
	</select>
	
</mapper>





















































